!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.seview={})}(this,function(t){"use strict";var o=function(t){return"string"==typeof t},f=function(t){return Array.isArray(t)},l=function(t){return"object"==typeof t&&!f(t)&&null!=t},h=function(t){var n=void 0;return o(t)&&0<t.length?n=t:"number"==typeof t?n=String(t):"boolean"==typeof t&&t&&(n=String(t)),n},v=function(t,n){return null==t?void 0:1===n.length?t[n[0]]:v(t[n[0]],n.slice(1))},d=function(t,n,e){return 1===n.length?l(t[n[0]])?Object.assign(t[n[0]],e):t[n[0]]=e:(null==t[[n[0]]]&&(t[[n[0]]]={}),d(t[n[0]],n.slice(1),e)),t},p=/^([a-z1-6]+)(?::([a-z]+))?/,y=/((?:#|\.|@)[\w-]+)|(\[.*?\])/g,g=/\[([\w-]+)(?:=([^\]]+))?\]/,m=function(t){var n=[];return t.forEach(function(t){h(t)?n.push(h(t)):f(t)&&n.push(r(t))}),n},r=function(t){var n=t[2],e=3,r=function(t){var i={},n=t.match(p);n||(n=["div","div"]),i.tag=n[1],n[2]&&(i.attrs={type:n[2]});var e=t.match(y);if(e){var a=[];e.forEach(function(t){var n=t[0],e=t.slice(1);if("#"===n)d(i,["attrs","id"],e);else if("."===n)a.push(e);else if("["===n){var r=t.match(g);d(i,["attrs",r[1]],r[2]||!0)}}),0<a.length&&d(i,["attrs","className"],a.join(" "))}return i}(t[0]);if(l(t[1])){var i=t[1];if(void 0!==i.className){var a=i.className;delete i.className;var s=[];if(o(a)?s=a.split(" "):l(a)&&Object.keys(a).forEach(function(t){a[t]&&s.push(t)}),0<s.length){var c=v(r,["attrs","className"]),u=s.join(" ");d(r,["attrs","className"],(c?c+" ":"")+u)}}0<Object.keys(i).length&&(void 0===r.attrs?r.attrs=i:r.attrs=Object.assign(r.attrs,i))}else n=t[1],e=2;return t.length>e?r.children=m(t.slice(e-1)):(h(n)&&(r.children=[h(n)]),f(n)&&(r.children=m(o(n[0])?[n]:n))),r},i=function(n,t){if(f(t.children)){var e=[];t.children.forEach(function(t){e.push(o(t)?n(t):i(n,t))}),t.children=e}return n(t)};t.sv=function(e){return function(t){var n=r(t);return i(e,n)}},t.mapKeys=function(s){return function(i){if(!l(i))return i;var a={};return Object.keys(s).forEach(function(t){var n=t.split("."),e=s[t].split("."),r=v(i,n);null!=r&&d(a,e,r)}),a}},Object.defineProperty(t,"__esModule",{value:!0})});
